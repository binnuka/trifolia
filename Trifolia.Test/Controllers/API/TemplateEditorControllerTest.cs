using System;
using Microsoft.VisualStudio.TestTools.UnitTesting;
using Trifolia.Web.Models.TemplateEditing;
using Newtonsoft.Json;

namespace Trifolia.Test.Controllers.API
{
    [TestClass]
    public class TemplateEditorControllerTest
    {
        [TestMethod]
        public void DeserializeJsonSaveTest()
        {
            string json = "{\"Template\":{\"Id\":8268,\"Name\":\"006: RCS Structured Body\",\"Oid\":\"urn:oid:1.3.6.1.4.1.19376.1.4.1.7.1.103\",\"IsOpen\":true,\"OwningImplementationGuideId\":3243,\"TemplateTypeId\":1,\"PrimaryContext\":\"structuredBody\",\"PrimaryContextType\":\"StructuredBody\",\"Bookmark\":\"D_006_RCS_Structured_Body\",\"ImpliedTemplateId\":null,\"StatusId\":null,\"Description\":\"\",\"Notes\":\"\",\"PreviousVersionLink\":null,\"PreviousVersionName\":null,\"PreviousVersionOid\":null,\"AuthorId\":29,\"Author\":\"AbdulMalik Shakir\",\"OrganizationName\":\"LCG\",\"MoveUrl\":\"/TemplateManagement/Move/OID/1.3.6.1.4.1.19376.1.4.1.7.1.103\",\"TemplateTypeAbbreviation\":\"D\",\"Locked\":false,\"ContainedByTemplates\":[{\"EditUrl\":\"/TemplateManagement/Edit/OID/1.3.6.1.4.1.19376.1.4.1.7.1.101.9\",\"ViewUrl\":\"/TemplateManagement/View/OID/1.3.6.1.4.1.19376.1.4.1.7.1.101.9\",\"Name\":\"001: RCS Document Header   \",\"ImplementationGuide\":\"Registry Content Submission - CathPCI v5.0 Content Profile\"}],\"ImpliedByTemplates\":[],\"Extensions\":[]},\"RemovedConstraints\":null,\"Constraints\":[{\"$$bindingType\": \"Test\",\"Id\":113901,\"IsNew\":false,\"Number\":33698,\"IsPrimitive\":false,\"Context\":\"@classCode\",\"Conformance\":\"MAY\",\"Cardinality\":\"1..1\",\"DataType\":\"\",\"IsBranch\":false,\"IsBranchIdentifier\":false,\"PrimitiveText\":null,\"Description\":null,\"Notes\":null,\"Label\":null,\"ValueConformance\":null,\"Value\":\"DOCBODY\",\"ValueDisplayName\":null,\"Binding\":\"DEFAULT\",\"ValueSetId\":null,\"ValueSetDate\":null,\"ValueCodeSystemId\":null,\"ContainedTemplateId\":null,\"Schematron\":null,\"Category\":null,\"DisplayNumber\":null,\"IsModifier\":false,\"MustSupport\":false,\"IsHeading\":false,\"HeadingDescription\":null,\"IsSchRooted\":false,\"IsInheritable\":true,\"IsChoice\":false,\"IsFixed\":false,\"Children\":[],\"Template\":null,\"Parent\":null,\"IsStatic\":null,\"Order\":0,\"IsValueSetStatic\":false},{\"Id\":113902,\"IsNew\":false,\"Number\":33699,\"IsPrimitive\":false,\"Context\":\"@moodCode\",\"Conformance\":\"SHALL\",\"Cardinality\":\"1..1\",\"DataType\":\"\",\"IsBranch\":false,\"IsBranchIdentifier\":false,\"PrimitiveText\":null,\"Description\":null,\"Notes\":null,\"Label\":null,\"ValueConformance\":null,\"Value\":\"EVN\",\"ValueDisplayName\":null,\"Binding\":\"DEFAULT\",\"ValueSetId\":null,\"ValueSetDate\":null,\"ValueCodeSystemId\":null,\"ContainedTemplateId\":null,\"Schematron\":null,\"Category\":null,\"DisplayNumber\":null,\"IsModifier\":false,\"MustSupport\":false,\"IsHeading\":false,\"HeadingDescription\":null,\"IsSchRooted\":false,\"IsInheritable\":true,\"IsChoice\":false,\"IsFixed\":false,\"Children\":[],\"Template\":null,\"Parent\":null,\"IsStatic\":null,\"Order\":0,\"IsValueSetStatic\":false},{\"Id\":113896,\"IsNew\":false,\"Number\":33697,\"IsPrimitive\":false,\"Context\":\"templateId\",\"Conformance\":\"SHALL\",\"Cardinality\":\"1..*\",\"DataType\":\"\",\"IsBranch\":true,\"IsBranchIdentifier\":false,\"PrimitiveText\":null,\"Description\":null,\"Notes\":null,\"Label\":null,\"ValueConformance\":null,\"Value\":null,\"ValueDisplayName\":null,\"Binding\":\"DEFAULT\",\"ValueSetId\":null,\"ValueSetDate\":null,\"ValueCodeSystemId\":null,\"ContainedTemplateId\":null,\"Schematron\":null,\"Category\":null,\"DisplayNumber\":null,\"IsModifier\":false,\"MustSupport\":false,\"IsHeading\":false,\"HeadingDescription\":null,\"IsSchRooted\":false,\"IsInheritable\":true,\"IsChoice\":false,\"IsFixed\":false,\"Children\":[{\"Id\":113899,\"IsNew\":false,\"Number\":33700,\"IsPrimitive\":false,\"Context\":\"@root\",\"Conformance\":\"SHALL\",\"Cardinality\":\"1..1\",\"DataType\":\"\",\"IsBranch\":false,\"IsBranchIdentifier\":true,\"PrimitiveText\":null,\"Description\":null,\"Notes\":null,\"Label\":null,\"ValueConformance\":null,\"Value\":\"1.3.6.1.4.1.19376.1.4.1.7.1.103\",\"ValueDisplayName\":null,\"Binding\":\"DEFAULT\",\"ValueSetId\":null,\"ValueSetDate\":null,\"ValueCodeSystemId\":null,\"ContainedTemplateId\":null,\"Schematron\":null,\"Category\":null,\"DisplayNumber\":null,\"IsModifier\":false,\"MustSupport\":false,\"IsHeading\":false,\"HeadingDescription\":null,\"IsSchRooted\":false,\"IsInheritable\":true,\"IsChoice\":false,\"IsFixed\":false,\"Children\":[],\"Template\":null,\"Parent\":null,\"IsStatic\":null,\"Order\":0,\"IsValueSetStatic\":false},{\"Id\":113900,\"IsNew\":false,\"Number\":33701,\"IsPrimitive\":false,\"Context\":\"@extension\",\"Conformance\":\"MAY\",\"Cardinality\":\"0..1\",\"DataType\":\"\",\"IsBranch\":false,\"IsBranchIdentifier\":false,\"PrimitiveText\":null,\"Description\":null,\"Notes\":null,\"Label\":null,\"ValueConformance\":null,\"Value\":null,\"ValueDisplayName\":null,\"Binding\":\"DEFAULT\",\"ValueSetId\":null,\"ValueSetDate\":null,\"ValueCodeSystemId\":null,\"ContainedTemplateId\":null,\"Schematron\":null,\"Category\":null,\"DisplayNumber\":null,\"IsModifier\":false,\"MustSupport\":false,\"IsHeading\":false,\"HeadingDescription\":null,\"IsSchRooted\":false,\"IsInheritable\":true,\"IsChoice\":false,\"IsFixed\":false,\"Children\":[],\"Template\":null,\"Parent\":null,\"IsStatic\":null,\"Order\":0,\"IsValueSetStatic\":false}],\"Template\":null,\"Parent\":null,\"IsStatic\":null,\"Order\":0,\"IsValueSetStatic\":false},{\"Id\":113895,\"IsNew\":false,\"Number\":33702,\"IsPrimitive\":false,\"Context\":\"component\",\"Conformance\":\"SHALL\",\"Cardinality\":\"1..1\",\"DataType\":\"\",\"IsBranch\":true,\"IsBranchIdentifier\":false,\"PrimitiveText\":null,\"Description\":null,\"Notes\":\"RCS-EP Patient Demographic Section\",\"Label\":null,\"ValueConformance\":null,\"Value\":null,\"ValueDisplayName\":null,\"Binding\":\"DEFAULT\",\"ValueSetId\":null,\"ValueSetDate\":null,\"ValueCodeSystemId\":null,\"ContainedTemplateId\":null,\"Schematron\":null,\"Category\":null,\"DisplayNumber\":null,\"IsModifier\":false,\"MustSupport\":false,\"IsHeading\":false,\"HeadingDescription\":null,\"IsSchRooted\":false,\"IsInheritable\":true,\"IsChoice\":false,\"IsFixed\":false,\"Children\":[{\"Id\":113903,\"IsNew\":false,\"Number\":33704,\"IsPrimitive\":false,\"Context\":\"@typeCode\",\"Conformance\":\"SHALL\",\"Cardinality\":\"1..1\",\"DataType\":\"\",\"IsBranch\":false,\"IsBranchIdentifier\":false,\"PrimitiveText\":null,\"Description\":null,\"Notes\":null,\"Label\":null,\"ValueConformance\":null,\"Value\":\"COMP\",\"ValueDisplayName\":null,\"Binding\":\"DEFAULT\",\"ValueSetId\":null,\"ValueSetDate\":null,\"ValueCodeSystemId\":null,\"ContainedTemplateId\":null,\"Schematron\":null,\"Category\":null,\"DisplayNumber\":null,\"IsModifier\":false,\"MustSupport\":false,\"IsHeading\":false,\"HeadingDescription\":null,\"IsSchRooted\":false,\"IsInheritable\":true,\"IsChoice\":false,\"IsFixed\":false,\"Children\":[],\"Template\":null,\"Parent\":null,\"IsStatic\":null,\"Order\":0,\"IsValueSetStatic\":false},{\"Id\":113904,\"IsNew\":false,\"Number\":33705,\"IsPrimitive\":false,\"Context\":\"@contextConductionInd\",\"Conformance\":\"SHALL\",\"Cardinality\":\"1..1\",\"DataType\":\"\",\"IsBranch\":false,\"IsBranchIdentifier\":false,\"PrimitiveText\":null,\"Description\":null,\"Notes\":null,\"Label\":null,\"ValueConformance\":null,\"Value\":\"true\",\"ValueDisplayName\":null,\"Binding\":\"DEFAULT\",\"ValueSetId\":null,\"ValueSetDate\":null,\"ValueCodeSystemId\":null,\"ContainedTemplateId\":null,\"Schematron\":null,\"Category\":null,\"DisplayNumber\":null,\"IsModifier\":false,\"MustSupport\":false,\"IsHeading\":false,\"HeadingDescription\":null,\"IsSchRooted\":false,\"IsInheritable\":true,\"IsChoice\":false,\"IsFixed\":false,\"Children\":[],\"Template\":null,\"Parent\":null,\"IsStatic\":null,\"Order\":0,\"IsValueSetStatic\":false},{\"Id\":113898,\"IsNew\":false,\"Number\":33706,\"IsPrimitive\":false,\"Context\":\"section\",\"Conformance\":\"SHALL\",\"Cardinality\":\"1..1\",\"DataType\":\"\",\"IsBranch\":false,\"IsBranchIdentifier\":true,\"PrimitiveText\":null,\"Description\":null,\"Notes\":null,\"Label\":null,\"ValueConformance\":null,\"Value\":null,\"ValueDisplayName\":null,\"Binding\":\"DEFAULT\",\"ValueSetId\":null,\"ValueSetDate\":null,\"ValueCodeSystemId\":null,\"ContainedTemplateId\":5063,\"Schematron\":null,\"Category\":null,\"DisplayNumber\":null,\"IsModifier\":false,\"MustSupport\":false,\"IsHeading\":false,\"HeadingDescription\":null,\"IsSchRooted\":false,\"IsInheritable\":true,\"IsChoice\":false,\"IsFixed\":false,\"Children\":[],\"Template\":null,\"Parent\":null,\"IsStatic\":null,\"Order\":0,\"IsValueSetStatic\":false}],\"Template\":null,\"Parent\":null,\"IsStatic\":null,\"Order\":0,\"IsValueSetStatic\":false},{\"Id\":113897,\"IsNew\":false,\"Number\":33703,\"IsPrimitive\":false,\"Context\":\"component\",\"Conformance\":\"SHALL\",\"Cardinality\":\"1..*\",\"DataType\":\"\",\"IsBranch\":true,\"IsBranchIdentifier\":false,\"PrimitiveText\":null,\"Description\":null,\"Notes\":\"RCS-C Encounter Section\",\"Label\":null,\"ValueConformance\":null,\"Value\":null,\"ValueDisplayName\":null,\"Binding\":\"DEFAULT\",\"ValueSetId\":null,\"ValueSetDate\":null,\"ValueCodeSystemId\":null,\"ContainedTemplateId\":null,\"Schematron\":null,\"Category\":null,\"DisplayNumber\":null,\"IsModifier\":false,\"MustSupport\":false,\"IsHeading\":false,\"HeadingDescription\":null,\"IsSchRooted\":false,\"IsInheritable\":true,\"IsChoice\":false,\"IsFixed\":false,\"Children\":[{\"Id\":113905,\"IsNew\":false,\"Number\":33707,\"IsPrimitive\":false,\"Context\":\"@typeCode\",\"Conformance\":\"SHALL\",\"Cardinality\":\"1..1\",\"DataType\":\"\",\"IsBranch\":false,\"IsBranchIdentifier\":false,\"PrimitiveText\":null,\"Description\":null,\"Notes\":null,\"Label\":null,\"ValueConformance\":null,\"Value\":\"COMP\",\"ValueDisplayName\":null,\"Binding\":\"DEFAULT\",\"ValueSetId\":null,\"ValueSetDate\":null,\"ValueCodeSystemId\":null,\"ContainedTemplateId\":null,\"Schematron\":null,\"Category\":null,\"DisplayNumber\":null,\"IsModifier\":false,\"MustSupport\":false,\"IsHeading\":false,\"HeadingDescription\":null,\"IsSchRooted\":false,\"IsInheritable\":true,\"IsChoice\":false,\"IsFixed\":false,\"Children\":[],\"Template\":null,\"Parent\":null,\"IsStatic\":null,\"Order\":0,\"IsValueSetStatic\":false},{\"Id\":113906,\"IsNew\":false,\"Number\":33708,\"IsPrimitive\":false,\"Context\":\"@contextConductionInd\",\"Conformance\":\"SHALL\",\"Cardinality\":\"1..1\",\"DataType\":\"\",\"IsBranch\":false,\"IsBranchIdentifier\":false,\"PrimitiveText\":null,\"Description\":null,\"Notes\":null,\"Label\":null,\"ValueConformance\":null,\"Value\":\"true\",\"ValueDisplayName\":null,\"Binding\":\"DEFAULT\",\"ValueSetId\":null,\"ValueSetDate\":null,\"ValueCodeSystemId\":null,\"ContainedTemplateId\":null,\"Schematron\":null,\"Category\":null,\"DisplayNumber\":null,\"IsModifier\":false,\"MustSupport\":false,\"IsHeading\":false,\"HeadingDescription\":null,\"IsSchRooted\":false,\"IsInheritable\":true,\"IsChoice\":false,\"IsFixed\":false,\"Children\":[],\"Template\":null,\"Parent\":null,\"IsStatic\":null,\"Order\":0,\"IsValueSetStatic\":false},{\"Id\":113907,\"IsNew\":false,\"Number\":33709,\"IsPrimitive\":false,\"Context\":\"section\",\"Conformance\":\"SHALL\",\"Cardinality\":\"1..1\",\"DataType\":\"\",\"IsBranch\":false,\"IsBranchIdentifier\":true,\"PrimitiveText\":null,\"Description\":null,\"Notes\":null,\"Label\":null,\"ValueConformance\":null,\"Value\":null,\"ValueDisplayName\":null,\"Binding\":\"DEFAULT\",\"ValueSetId\":null,\"ValueSetDate\":null,\"ValueCodeSystemId\":null,\"ContainedTemplateId\":8267,\"Schematron\":null,\"Category\":null,\"DisplayNumber\":null,\"IsModifier\":false,\"MustSupport\":false,\"IsHeading\":false,\"HeadingDescription\":null,\"IsSchRooted\":false,\"IsInheritable\":true,\"IsChoice\":false,\"IsFixed\":false,\"Children\":[],\"Template\":null,\"Parent\":null,\"IsStatic\":null,\"Order\":0,\"IsValueSetStatic\":false}],\"Template\":null,\"Parent\":null,\"IsStatic\":null,\"Order\":0,\"IsValueSetStatic\":false},{\"Id\":115811,\"IsNew\":false,\"Number\":92441,\"IsPrimitive\":false,\"Context\":\"component\",\"Conformance\":\"MAY\",\"Cardinality\":\"0..1\",\"DataType\":\"\",\"IsBranch\":true,\"IsBranchIdentifier\":false,\"PrimitiveText\":null,\"Description\":null,\"Notes\":\"RCS-C Encounter Section\",\"Label\":null,\"ValueConformance\":null,\"Value\":null,\"ValueDisplayName\":null,\"Binding\":\"DEFAULT\",\"ValueSetId\":null,\"ValueSetDate\":null,\"ValueCodeSystemId\":null,\"ContainedTemplateId\":null,\"Schematron\":null,\"Category\":null,\"DisplayNumber\":null,\"IsModifier\":false,\"MustSupport\":false,\"IsHeading\":false,\"HeadingDescription\":null,\"IsSchRooted\":false,\"IsInheritable\":true,\"IsChoice\":false,\"IsFixed\":false,\"Children\":[{\"Id\":115812,\"IsNew\":false,\"Number\":92442,\"IsPrimitive\":false,\"Context\":\"@typeCode\",\"Conformance\":\"SHALL\",\"Cardinality\":\"1..1\",\"DataType\":\"\",\"IsBranch\":false,\"IsBranchIdentifier\":false,\"PrimitiveText\":null,\"Description\":null,\"Notes\":null,\"Label\":null,\"ValueConformance\":null,\"Value\":\"COMP\",\"ValueDisplayName\":null,\"Binding\":\"DEFAULT\",\"ValueSetId\":null,\"ValueSetDate\":null,\"ValueCodeSystemId\":null,\"ContainedTemplateId\":null,\"Schematron\":null,\"Category\":\"\",\"DisplayNumber\":null,\"IsModifier\":false,\"MustSupport\":false,\"IsHeading\":false,\"HeadingDescription\":null,\"IsSchRooted\":false,\"IsInheritable\":true,\"IsChoice\":false,\"IsFixed\":false,\"Children\":[],\"Template\":null,\"Parent\":null,\"IsStatic\":null,\"Order\":0,\"IsValueSetStatic\":false},{\"Id\":115813,\"IsNew\":false,\"Number\":92443,\"IsPrimitive\":false,\"Context\":\"@contextConductionInd\",\"Conformance\":\"SHALL\",\"Cardinality\":\"1..1\",\"DataType\":\"\",\"IsBranch\":false,\"IsBranchIdentifier\":false,\"PrimitiveText\":null,\"Description\":null,\"Notes\":null,\"Label\":null,\"ValueConformance\":null,\"Value\":\"true\",\"ValueDisplayName\":null,\"Binding\":\"DEFAULT\",\"ValueSetId\":null,\"ValueSetDate\":null,\"ValueCodeSystemId\":null,\"ContainedTemplateId\":null,\"Schematron\":null,\"Category\":\"\",\"DisplayNumber\":null,\"IsModifier\":false,\"MustSupport\":false,\"IsHeading\":false,\"HeadingDescription\":null,\"IsSchRooted\":false,\"IsInheritable\":true,\"IsChoice\":false,\"IsFixed\":false,\"Children\":[],\"Template\":null,\"Parent\":null,\"IsStatic\":null,\"Order\":0,\"IsValueSetStatic\":false},{\"Id\":115814,\"IsNew\":false,\"Number\":92444,\"IsPrimitive\":false,\"Context\":\"section\",\"Conformance\":\"SHALL\",\"Cardinality\":\"1..1\",\"DataType\":\"\",\"IsBranch\":false,\"IsBranchIdentifier\":true,\"PrimitiveText\":null,\"Description\":null,\"Notes\":null,\"Label\":null,\"ValueConformance\":null,\"Value\":null,\"ValueDisplayName\":null,\"Binding\":\"DEFAULT\",\"ValueSetId\":null,\"ValueSetDate\":null,\"ValueCodeSystemId\":null,\"ContainedTemplateId\":8373,\"Schematron\":null,\"Category\":\"\",\"DisplayNumber\":null,\"IsModifier\":false,\"MustSupport\":false,\"IsHeading\":false,\"HeadingDescription\":null,\"IsSchRooted\":false,\"IsInheritable\":true,\"IsChoice\":false,\"IsFixed\":false,\"Children\":[],\"Template\":null,\"Parent\":null,\"IsStatic\":null,\"Order\":0,\"IsValueSetStatic\":false}],\"Template\":null,\"Parent\":null,\"IsStatic\":null,\"Order\":0,\"IsValueSetStatic\":false}]}";
            SaveModel model = JsonConvert.DeserializeObject<SaveModel>(json);

            Assert.IsNotNull(model);
        }
    }
}
